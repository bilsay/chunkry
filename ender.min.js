/*!
  * =============================================================
  * Ender: open module JavaScript framework (https://enderjs.com)
  * Build: ender build isbn
  * Packages: ender-core@2.0.0 ender-commonjs@1.0.8 isbn@0.2.0
  * =============================================================
  */
(function(){/*!
    * Ender: open module JavaScript framework (client-lib)
    * http://enderjs.com
    * License MIT
    */
function e(e,n){var r;if(this.length=0,"string"==typeof e&&(e=i._select(this.selector=e,n)),null==e)return this;if("function"==typeof e)i._closure(e,n);else if("object"!=typeof e||e.nodeType||(r=e.length)!==+r||e==e.window)this[this.length++]=e;else for(this.length=r=r>0?~~r:0;r--;)this[r]=e[r]}function i(i,n){return new e(i,n)}function n(e){if("$"+e in n._cache)return n._cache["$"+e];if("$"+e in n._modules)return n._cache["$"+e]=n._modules["$"+e]._load();if(e in window)return window[e];throw new Error('Requested module "'+e+'" has not been defined.')}function r(e,i){return n._cache["$"+e]=i}function t(e,i){this.id=e,this.fn=i,n._modules["$"+e]=this}i.fn=i.prototype=e.prototype,i._reserved={reserved:1,ender:1,expose:1,noConflict:1,fn:1},e.prototype.$=i,e.prototype.splice=function(){throw new Error("Not implemented")},e.prototype.forEach=function(e,i){var n,r;for(n=0,r=this.length;r>n;++n)n in this&&e.call(i||this[n],this[n],n,this);return this},i.ender=function(n,r){var t=r?e.prototype:i;for(var s in n)!(s in i._reserved)&&(t[s]=n[s]);return t},i._select=function(e,i){return e?(i||document).querySelectorAll(e):[]},i._closure=function(e){e.call(document,i)},"undefined"!=typeof module&&module.exports&&(module.exports=i);i.expose=function(e,n){i.expose.old[e]=window[e],window[e]=n},i.expose.old={},i.noConflict=function(e){if(window.$=i.expose.old.$,e)for(var n in i.expose.old)window[n]=i.expose.old[n];return this},i.expose("$",i),i.expose("ender",i);/*!
    * Ender: open module JavaScript framework (module-lib)
    * http://enderjs.com
    * License MIT
    */
var s=this;n._cache={},n._modules={},t.prototype.require=function(e){var i,r;if("."==e.charAt(0)){for(i=(this.id.replace(/\/.*?$/,"/")+e.replace(/\.js$/,"")).split("/");~(r=i.indexOf("."));)i.splice(r,1);for(;(r=i.lastIndexOf(".."))>0;)i.splice(r-1,2);e=i.join("/")}return n(e)},t.prototype._load=function(){var e=this,i=/^\.\.\//g,n=/^\.\/[^\/]+$/g;return e._loaded||(e._loaded=!0,e.exports={},e.fn.call(s,e,e.exports,function(r){return r.match(i)?r=e.id.replace(/[^\/]+\/[^\/]+$/,"")+r.replace(i,""):r.match(n)&&(r=e.id.replace(/\/[^\/]+$/,"")+r.replace(".","")),e.require(r)},s)),e.exports},t.createPackage=function(e,i,r){var s,o;for(s in i)new t(e+"/"+s,i[s]),(o=s.match(/^(.+)\/index$/))&&new t(e+"/"+o[1],i[s]);r&&(n._modules["$"+e]=n._modules["$"+e+"/"+r])},i&&i.expose&&(i.expose("global",s),i.expose("require",n),i.expose("provide",r),i.expose("Module",t)),t.createPackage("isbn",{isbn:function(e,i,n,r){!function(){"use strict";var i={VERSION:"0.01",GROUPS:{0:{name:"English speaking area",ranges:[["00","19"],["200","699"],["7000","8499"],["85000","89999"],["900000","949999"],["9500000","9999999"]]},1:{name:"English speaking area",ranges:[["00","09"],["100","399"],["4000","5499"],["55000","86979"],["869800","998999"]]},4:{name:"Japan",ranges:[["00","19"],["200","699"],["7000","8499"],["85000","89999"],["900000","949999"],["9500000","9999999"]]}},isbn:function(){this.initialize.apply(this,arguments)},parse:function(e,n){var r=new i.isbn(e,n?n:i.GROUPS);return r.isValid()?r:null},hyphenate:function(e){var n=i.parse(e);return n?n.isIsbn13()?n.asIsbn13(!0):n.asIsbn10(!0):null},asIsbn13:function(e,n){var r=i.parse(e);return r?r.asIsbn13(n):null},asIsbn10:function(e,n){var r=i.parse(e);return r?r.asIsbn10(n):null}};i.isbn.prototype={isValid:function(){return this.codes&&this.codes.isValid},isIsbn13:function(){return this.isValid()&&this.codes.isIsbn13},isIsbn10:function(){return this.isValid()&&this.codes.isIsbn10},asIsbn10:function(e){return this.isValid()?e?this.codes.isbn10h:this.codes.isbn10:null},asIsbn13:function(e){return this.isValid()?e?this.codes.isbn13h:this.codes.isbn13:null},initialize:function(e,i){this.groups=i,this.codes=this.parse(e)},merge:function(e,i){var n;if(!e||!i)return null;for(n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);return e},parse:function(e){var i;return e+="",i=e.match(/^\d{9}[\dX]$/)?this.fill(this.merge({source:e,isValid:!0,isIsbn10:!0,isIsbn13:!1},this.split(e))):13===e.length&&e.match(/^(\d+)-(\d+)-(\d+)-([\dX])$/)?this.fill({source:e,isValid:!0,isIsbn10:!0,isIsbn13:!1,group:RegExp.$1,publisher:RegExp.$2,article:RegExp.$3,check:RegExp.$4}):e.match(/^(978|979)(\d{9}[\dX]$)/)?this.fill(this.merge({source:e,isValid:!0,isIsbn10:!1,isIsbn13:!0,prefix:RegExp.$1},this.split(RegExp.$2))):17===e.length&&e.match(/^(978|979)-(\d+)-(\d+)-(\d+)-([\dX])$/)?this.fill({source:e,isValid:!0,isIsbn10:!1,isIsbn13:!0,prefix:RegExp.$1,group:RegExp.$2,publisher:RegExp.$3,article:RegExp.$4,check:RegExp.$5}):null,i?this.merge(i,{isValid:i.check===(i.isIsbn13?i.check13:i.check10)}):{source:e,isValid:!1}},split:function(e){return e?13===e.length?this.merge(this.split(e.substr(3)),{prefix:e.substr(0,3)}):10===e.length?this.splitToObject(e):null:null},splitToArray:function(e){var i,n,r,t,s;if(i=this.getGroupRecord(e),!i)return null;for(t=0,s=i.record.ranges.length;s>t;t+=1)if(n=i.rest.substr(0,i.record.ranges[t][0].length),i.record.ranges[t][0]<=n&&i.record.ranges[t][1]>=n)return r=i.rest.substr(n.length),[i.group,n,r.substr(0,r.length-1),r.charAt(r.length-1)];return null},splitToObject:function(e){var i=this.splitToArray(e);return i&&4===i.length?{group:i[0],publisher:i[1],article:i[2],check:i[3]}:null},fill:function(e){var i,n,r,t,s,o;return e&&(i=this.groups[e.group])?(n=e.prefix?e.prefix:"978",(r=this.calcCheckDigit([e.group,e.publisher,e.article].join("")))&&(t=this.calcCheckDigit([n,e.group,e.publisher,e.article].join("")))?(s=[n,e.group,e.publisher,e.article,t],this.merge(e,{isbn13:s.join(""),isbn13h:s.join("-"),check10:r,check13:t,groupname:i.name}),"978"===n&&(o=[e.group,e.publisher,e.article,r],this.merge(e,{isbn10:o.join(""),isbn10h:o.join("-")})),e):null):null},getGroupRecord:function(e){var i;for(i in this.groups)if(e.match("^"+i+"(.+)"))return{group:i,record:this.groups[i],rest:RegExp.$1};return null},calcCheckDigit:function(e){var i,n;if(e.match(/^\d{9}[\dX]?$/)){for(i=0,n=0;9>n;n+=1)i+=(10-n)*e.charAt(n);return i=(11-i%11)%11,10===i?"X":String(i)}if(e.match(/(?:978|979)\d{9}[\dX]?/)){for(i=0,n=0;12>n;n+=2)i+=Number(e.charAt(n))+3*e.charAt(n+1);return String((10-i%10)%10)}return null}};var n="object"==typeof window&&window?window:e.exports;n.ISBN=i}()}},"isbn"),n("isbn")}).call(window);